import unittest
from FlaskServer import *


class FlaskServerTest(unittest.TestCase):
    def test_compute_max_profit(self):
        input1 = [{'price': '7.0100', 'date': '2017-11-16'}, {'price': '6.9000', 'date': '2017-11-17'},
                  {'price': '7.2300', 'date': '2017-11-20'}, {'price': '7.0400', 'date': '2017-11-21'},
                  {'price': '7.3600', 'date': '2017-11-22'}, {'price': '7.2800', 'date': '2017-11-24'},
                  {'price': '7.2700', 'date': '2017-11-27'}, {'price': '7.1200', 'date': '2017-11-28'},
                  {'price': '7.2200', 'date': '2017-11-29'}, {'price': '7.3000', 'date': '2017-11-30'},
                  {'price': '7.2600', 'date': '2017-12-01'}, {'price': '7.2200', 'date': '2017-12-04'},
                  {'price': '7.8500', 'date': '2017-12-05'}, {'price': '7.1900', 'date': '2017-12-06'},
                  {'price': '6.9900', 'date': '2017-12-07'}, {'price': '6.3600', 'date': '2017-12-08'},
                  {'price': '6.5800', 'date': '2017-12-11'}, {'price': '7.1500', 'date': '2017-12-12'},
                  {'price': '7.4300', 'date': '2017-12-13'}, {'price': '7.9700', 'date': '2017-12-14'},
                  {'price': '7.7900', 'date': '2017-12-15'}, {'price': '7.8200', 'date': '2017-12-18'},
                  {'price': '7.8000', 'date': '2017-12-19'}, {'price': '8.2300', 'date': '2017-12-20'},
                  {'price': '8.0700', 'date': '2017-12-21'}, {'price': '8.0500', 'date': '2017-12-22'},
                  {'price': '7.9400', 'date': '2017-12-26'}, {'price': '8.0400', 'date': '2017-12-27'},
                  {'price': '8.1600', 'date': '2017-12-28'}, {'price': '8.1800', 'date': '2017-12-29'},
                  {'price': '8.4700', 'date': '2018-01-02'}, {'price': '9.0000', 'date': '2018-01-03'},
                  {'price': '9.1179', 'date': '2018-01-04'}, {'price': '9.4190', 'date': '2018-01-05'},
                  {'price': '9.2000', 'date': '2018-01-08'}, {'price': '9.0000', 'date': '2018-01-09'},
                  {'price': '8.8700', 'date': '2018-01-10'}, {'price': '8.9700', 'date': '2018-01-11'},
                  {'price': '8.9700', 'date': '2018-01-12'}, {'price': '8.7400', 'date': '2018-01-16'},
                  {'price': '8.5000', 'date': '2018-01-17'}, {'price': '8.5200', 'date': '2018-01-18'},
                  {'price': '8.6400', 'date': '2018-01-19'}, {'price': '8.6700', 'date': '2018-01-22'},
                  {'price': '8.7600', 'date': '2018-01-23'}, {'price': '8.7300', 'date': '2018-01-24'},
                  {'price': '8.8300', 'date': '2018-01-25'}, {'price': '9.5700', 'date': '2018-01-26'},
                  {'price': '9.5900', 'date': '2018-01-29'}, {'price': '9.1500', 'date': '2018-01-30'},
                  {'price': '9.1300', 'date': '2018-01-31'}, {'price': '9.1214', 'date': '2018-02-01'},
                  {'price': '8.9500', 'date': '2018-02-02'}, {'price': '8.4700', 'date': '2018-02-05'},
                  {'price': '8.3000', 'date': '2018-02-06'}, {'price': '8.2800', 'date': '2018-02-07'},
                  {'price': '8.0400', 'date': '2018-02-08'}, {'price': '7.8700', 'date': '2018-02-09'},
                  {'price': '7.9811', 'date': '2018-02-12'}, {'price': '7.9690', 'date': '2018-02-13'},
                  {'price': '8.1100', 'date': '2018-02-14'}, {'price': '8.2400', 'date': '2018-02-15'},
                  {'price': '8.3100', 'date': '2018-02-16'}, {'price': '8.2000', 'date': '2018-02-20'},
                  {'price': '8.5500', 'date': '2018-02-21'}, {'price': '8.2050', 'date': '2018-02-22'},
                  {'price': '8.0900', 'date': '2018-02-23'}, {'price': '8.0550', 'date': '2018-02-26'},
                  {'price': '7.8600', 'date': '2018-02-27'}, {'price': '7.7500', 'date': '2018-02-28'},
                  {'price': '7.7400', 'date': '2018-03-01'}, {'price': '7.9500', 'date': '2018-03-02'},
                  {'price': '7.9000', 'date': '2018-03-05'}, {'price': '7.9900', 'date': '2018-03-06'},
                  {'price': '7.9900', 'date': '2018-03-07'}, {'price': '7.9700', 'date': '2018-03-08'},
                  {'price': '8.3250', 'date': '2018-03-09'}, {'price': '8.5621', 'date': '2018-03-12'},
                  {'price': '8.8400', 'date': '2018-03-13'}, {'price': '8.2800', 'date': '2018-03-14'},
                  {'price': '8.0800', 'date': '2018-03-15'}, {'price': '8.1500', 'date': '2018-03-16'},
                  {'price': '8.0800', 'date': '2018-03-19'}, {'price': '8.0882', 'date': '2018-03-20'},
                  {'price': '7.9600', 'date': '2018-03-21'}, {'price': '7.9700', 'date': '2018-03-22'},
                  {'price': '7.8850', 'date': '2018-03-23'}, {'price': '7.8800', 'date': '2018-03-26'},
                  {'price': '7.6100', 'date': '2018-03-27'}, {'price': '7.0500', 'date': '2018-03-28'},
                  {'price': '7.0300', 'date': '2018-03-29'}, {'price': '7.1800', 'date': '2018-04-02'},
                  {'price': '6.8500', 'date': '2018-04-03'}, {'price': '6.6600', 'date': '2018-04-04'},
                  {'price': '6.8900', 'date': '2018-04-05'}, {'price': '6.6800', 'date': '2018-04-06'},
                  {'price': '6.4650', 'date': '2018-04-09'}, {'price': '6.7300', 'date': '2018-04-10'},
                  {'price': '6.7500', 'date': '2018-04-11'}, {'price': '6.7000', 'date': '2018-04-12'},
                  {'price': '6.6200', 'date': '2018-04-13'}, {'price': '6.4900', 'date': '2018-04-16'},
                  {'price': '6.6100', 'date': '2018-04-17'}, {'price': '6.5400', 'date': '2018-04-18'},
                  {'price': '6.4300', 'date': '2018-04-19'}, {'price': '6.2000', 'date': '2018-04-20'},
                  {'price': '5.9400', 'date': '2018-04-23'}, {'price': '5.9498', 'date': '2018-04-24'},
                  {'price': '5.8400', 'date': '2018-04-25'}, {'price': '5.6800', 'date': '2018-04-26'},
                  {'price': '5.6500', 'date': '2018-04-27'}, {'price': '5.5000', 'date': '2018-04-30'},
                  {'price': '5.3600', 'date': '2018-05-01'}, {'price': '5.3900', 'date': '2018-05-02'},
                  {'price': '5.2900', 'date': '2018-05-03'}, {'price': '5.3100', 'date': '2018-05-04'},
                  {'price': '5.4800', 'date': '2018-05-07'}, {'price': '5.3600', 'date': '2018-05-08'},
                  {'price': '5.3700', 'date': '2018-05-09'}, {'price': '5.3500', 'date': '2018-05-10'},
                  {'price': '5.2500', 'date': '2018-05-11'}, {'price': '5.6500', 'date': '2018-05-14'}]
        output = {'best_sell_price': 9.59, 'best_buy_price': '6.3600', 'buy': '2017-12-08',
                  'max_profit': 3.2299999999999995, 'sell': '2018-01-29'}
        self.assertEqual(compute_max_profit(input1), output)
